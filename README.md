# ShaderCross

## 项目简介
ShaderCross 是一个跨平台的着色器编译和转换工具，支持 HLSL 和 GLSL 之间的转换，旨在简化着色器开发流程。

## 功能描述
- **编译工具**
  - **DirectX Shader Compiler (DXC)**：用于现代 HLSL，支持 DXIL 和 SPIR-V 输出。
  - **GLSLANG**：用于 GLSL，输出 SPIR-V。
  - **SPIRV-Cross**：用于着色器代码转换，支持多种格式。

- **多格式支持**
  - 输入：HLSL, HLSL2021, GLSL
  - 输出：DXIL, DXBC, SPIR-V, HLSL, GLSL

- **现代化界面**
  - 深色/浅色主题，自动保存主题设置。
  - 可调整的面板布局，支持完整的快捷键。

- **开发者友好**
  - 多种编码支持（UTF-8/GB18030/UTF-16/System）。
  - 保存编译设置和工作环境，支持命令行参数（计划中）。

## 支持范围
- **Shader Model**
  - 5.0：DirectX 11 级别
  - 5.1：增强的 DirectX 11 特性
  - 6.0：DirectX 12 基础特性
  - 6.4：最新的 DirectX 12 特性

- **输出格式**
  - 根据编译器自动更新可用选项
  - DXC：DXIL, SPIR-V, GLSL
  - FXC：DXBC
  - GLSLANG：SPIR-V, HLSL, GLSL

## 界面设计
### 左侧面板（输入区）
- **着色器语言选择**
  - 支持 HLSL, HLSL2021 和 GLSL，根据语言自动调整可用的编译器选项。
  
- **源代码编辑器**
  - 支持多种文本编码，自动语法高亮。

- **资源管理**
  - 包含路径列表：管理头文件搜索路径。
  - 宏定义列表：管理预处理器定义。

### 右侧面板（编译选项和输出）
- **编译器配置**
  - 编译器选择
    - DXC：用于现代 HLSL，支持 DXIL 和 SPIR-V 输出。
    - FXC：用于传统 HLSL，输出 DXBC。
    - GLSLANG：用于 GLSL，输出 SPIR-V。
    - SPIRV-CROSS：用于着色器代码转换。
  
  - 着色器配置
    - 着色器类型选择（顶点/像素/几何等）。
    - 入口点设置。
    - Shader Model 版本选择。
  
  - 输出格式选择（根据编译器自动更新可用选项）。

- **编译输出区**
  - 显示编译结果和错误信息，支持保存输出结果。

## 主要特性
- **简化工作流程**：提供直观的图形界面，简化着色器编译和转换过程。
- **跨平台兼容**：支持主流图形API的着色器格式转换。
- **灵活性**：支持多种编译器和输出格式，满足不同项目需求。
- **可扩展性**：模块化设计，便于添加新的编译器和功能。

## 使用流程
1. **准备源代码**
   - 打开现有文件或直接编辑，选择正确的文本编码。

2. **配置编译选项**
   - 选择目标着色器类型，设置入口点，选择 Shader Model 版本，选择输出格式。

3. **管理依赖**
   - 添加必要的包含路径，设置所需的宏定义。

4. **编译和输出**
   - 点击编译按钮或按 F5，检查编译输出，保存编译结果。

## 快捷键列表
### 文件操作
- `Ctrl+O`：打开文件
- `Ctrl+S`：保存结果
- `Ctrl+W`：关闭当前文件
- `Alt+F4`：退出程序

### 编译操作
- `F5`：编译
- `Ctrl+Shift+D`：显示反汇编
- `F6`：清除输出

### 界面控制
- `F12`：切换输出面板
- `Ctrl+T`：切换主题
- `Ctrl+R`：重置布局

## 扩展性设计
### 编译器集成
- **统一接口**：标准化的编译器接口。
- **可插拔实现**：支持添加新的编译器。
- **灵活配置**：自定义编译选项。

### 界面定制
- **布局系统**：可配置的界面布局。
- **主题系统**：可扩展的主题支持。
- **快捷键**：自定义快捷键支持。

### 输出处理
- **格式定义**：灵活的输出格式系统。
- **扩展支持**：支持新格式添加。
- **自定义处理**：可定制输出处理流程。

## 性能优化
### 界面响应
- **异步编译**：后台编译处理。
- **延迟加载**：按需加载资源。
- **状态缓存**：优化界面更新。

### 资源管理
- **高效的资源管理**：确保资源的快速访问和管理。

## 项目概述

ShaderCross 是一个专业的着色器编译和转换工具，旨在简化跨平台图形开发中的着色器处理流程。它提供了直观的图形界面，支持多种着色器语言和中间格式之间的转换。

### 核心优势
- **统一工作流程**：整合多个着色器编译工具，提供统一的操作界面
- **智能编译选项**：根据输入/输出格式自动调整可用的编译器和选项
- **完整的格式支持**：覆盖主流图形API所需的着色器格式
- **开发者友好**：保存工作环境，支持多种编码，提供详细的编译信息

## 系统架构

ShaderCross 采用模块化设计，主要由以下几个核心模块组成：

### 界面模块
- **基于 Qt 5.12.5 框架**
  - 采用双面板设计
  - 支持深色/浅色主题切换
  - 完整的快捷键支持
  - 可配置的界面布局

### 编译器集成模块
- **DXC (DirectX Shader Compiler)**
  - 用于编译现代 HLSL
  - 支持 DXIL 和 SPIR-V 输出
  - 适用于 DirectX 12
- **FXC (Effect Compiler)**
  - 用于编译传统 HLSL
  - 输出 DXBC 格式
  - 适用于 DirectX 11
- **GLSLANG**
  - 用于编译 GLSL
  - 输出 SPIR-V 格式
  - 适用于 Vulkan/OpenGL
- **SPIRV-CROSS**
  - 用于着色器代码转换
  - 支持 HLSL/GLSL 输出
  - 跨平台格式转换

### 输入处理模块
- **多种文本编码支持**
  - UTF-8（默认）
  - GB18030（中文支持）
  - UTF-16
  - System
- **资源管理**
  - 文件路径管理
  - 包含路径管理
  - 宏定义处理
  - 自动保存机制

### 配置管理模块
- **基于 QSettings**
  - 自动保存/加载配置
  - 界面设置
  - 编译选项
  - 工作环境

## 技术栈

### 开发环境
- **编程语言**：C++17
- **构建系统**：CMake 3.15+
- **开发工具**：Visual Studio 2022
- **UI 框架**：Qt 5.12.5

### 依赖组件
- **Qt 组件**
  - Qt Widgets：界面组件
  - Qt Core：核心功能
- **编译工具**
  - DirectX Shader Compiler
  - GLSLANG
  - SPIRV-Cross

## 项目结构

## 设计目标

- **简化工作流程**：提供直观的图形界面，简化着色器编译和转换过程
- **跨平台兼容**：支持主流图形API的着色器格式转换
- **灵活性**：支持多种编译器和输出格式，满足不同项目需求
- **可扩展性**：模块化设计，便于添加新的编译器和功能

## 界面预览

采用现代化的双面板设计，提供清晰的工作流程：

### 左侧面板（输入区）
- **着色器语言选择**
  - 支持 HLSL 和 GLSL
  - 根据语言自动调整可用的编译器选项
- **源代码编辑器**
  - 支持多种文本编码
  - 自动语法高亮（计划中）
  - 实时错误提示（计划中）
- **资源管理**
  - 包含路径列表：管理头文件搜索路径
  - 宏定义列表：管理预处理器定义

### 右侧面板（编译选项和输出）
- **编译器配置**
  - 编译器选择
    - DXC：用于现代 HLSL，支持 DXIL 和 SPIR-V 输出
    - FXC：用于传统 HLSL，输出 DXBC
    - GLSLANG：用于 GLSL，输出 SPIR-V
    - SPIRV-CROSS：用于着色器代码转换
  - 着色器配置
    - 着色器类型选择（顶点/像素/几何等）
    - 入口点设置
    - Shader Model 版本选择
  - 输出格式选择（根据编译器自动更新可用选项）
- **编译输出区**
  - 编译结果和错误信息
  - 支持保存输出结果

## 工作流程示例

1. **HLSL 到 GLSL 转换**：
   - 选择 HLSL 源文件
   - 使用 DXC 编译为 SPIR-V
   - 使用 SPIRV-CROSS 转换为 GLSL

2. **GLSL 到 HLSL 转换**：
   - 选择 GLSL 源文件
   - 使用 GLSLANG 编译为 SPIR-V
   - 使用 SPIRV-CROSS 转换为 HLSL

详细文档请查看 [doc/README.md](doc/README.md)

## 编译流程

### Windows 平台
1. **环境准备**
   - 安装 Visual Studio 2022
   - 安装 Qt 5.12.5
   - 安装 CMake 3.15+

2. **构建步骤**

```bash
mkdir build
cd build
cmake ..
cmake --build . --config Release
```

## 扩展性设计

### 编译器集成
- **统一接口**：标准化的编译器接口
- **可插拔实现**：支持添加新的编译器
- **灵活配置**：自定义编译选项

### 界面定制
- **布局系统**：可配置的界面布局
- **主题系统**：可扩展的主题支持
- **快捷键**：自定义快捷键支持

### 输出处理
- **格式定义**：灵活的输出格式系统
- **扩展支持**：支持新格式添加
- **自定义处理**：可定制输出处理流程

## 性能优化

### 界面响应
- **异步编译**：后台编译处理
- **延迟加载**：按需加载资源
- **状态缓存**：优化界面更新

### 资源管理
- **高效的资源管理**：确保资源的快速访问和管理
``` 