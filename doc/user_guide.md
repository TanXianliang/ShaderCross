# ShaderCross 用户指南

## 界面布局

ShaderCross 采用直观的双面板设计，提供清晰的工作流程和丰富的编译选项。

### 左侧面板

#### 着色器输入区域
- **语言选择**
  - 下拉框选择 HLSL 或 GLSL
  - 切换语言时会自动更新可用的编译器选项
- **文件路径设置**
  - 文件路径输入框
  - "浏览"按钮：打开文件选择对话框
  - 支持拖放文件到输入框
- **编码选择**
  - 支持 UTF-8（默认）
  - GB18030（中文支持）
  - UTF-16
  - System（系统默认）
- **源代码编辑器**
  - 支持直接编辑
  - 自动保存修改
  - 显示行号（计划中）
  - 语法高亮（计划中）

#### 包含路径管理
- **路径列表**
  - 显示所有包含搜索路径
  - 支持拖动排序
  - 双击编辑路径
- **操作按钮**
  - "添加路径"：打开目录选择对话框
  - "删除路径"：移除选中的路径
  - 防止重复添加相同路径

#### 宏定义管理
- **宏列表**
  - 显示所有预处理器定义
  - 支持拖动排序
  - 双击编辑宏定义
- **操作按钮**
  - "添加宏"：打开宏定义对话框
  - "删除宏"：移除选中的宏
  - 防止重复添加相同宏

### 右侧面板

#### 编译器选项
- **编译器选择**
  - DXC：现代 HLSL 编译器
  - FXC：传统 HLSL 编译器
  - GLSLANG：GLSL 编译器
  - SPIRV-CROSS：着色器转换工具
- **着色器类型**
  - 常规着色器：
    - 顶点着色器 (Vertex)
    - 像素着色器 (Pixel)
    - 几何着色器 (Geometry)
    - 计算着色器 (Compute)
    - 外壳着色器 (Hull)
    - 域着色器 (Domain)
  - 高级着色器：
    - 光线生成着色器 (RayGeneration)
    - 相交着色器 (Intersection)
    - 任意命中着色器 (AnyHit)
    - 最近命中着色器 (ClosestHit)
    - 未命中着色器 (Miss)
    - 可调用着色器 (Callable)
    - 网格着色器 (Mesh)
- **入口点设置**
  - 默认值：main
  - 可自定义入口函数名
- **Shader Model**
  - 5.0：DirectX 11 级别
  - 5.1：增强的 DirectX 11 特性
  - 6.0：DirectX 12 基础特性
  - 6.4：最新的 DirectX 12 特性
- **输出格式**
  - 根据编译器自动更新可用选项
  - DXC：DXIL, SPIR-V
  - FXC：DXBC
  - GLSLANG：SPIR-V
  - SPIRV-CROSS：HLSL, GLSL

#### 编译输出区
- **输出窗口**
  - 显示编译结果
  - 显示错误信息
  - 支持文本选择和复制
  - 支持保存输出到文件
- **状态栏**
  - 显示编译状态
  - 显示错误计数
  - 显示警告计数

### 菜单栏

#### 文件菜单
- **打开** (Ctrl+O)：打开着色器源文件
- **保存** (Ctrl+S)：保存编译结果
- **退出**：关闭程序

#### 编译菜单
- **编译** (F5)：执行编译
- **显示反汇编** (Ctrl+Shift+D)：查看反汇编代码

#### 视图菜单
- **重置布局**：恢复默认布局
- **切换输出面板** (F12)：显示/隐藏输出面板
- **切换主题** (Ctrl+T)：深色/浅色主题切换

### 工具栏
- 快速访问常用功能
- 可自定义显示的按钮（计划中）
- 支持图标和文本显示

## 使用流程

1. **准备源代码**
   - 打开现有文件或直接编辑
   - 选择正确的文本编码

2. **配置编译选项**
   - 选择目标着色器类型
   - 设置入口点
   - 选择 Shader Model 版本
   - 选择输出格式

3. **管理依赖**
   - 添加必要的包含路径
   - 设置所需的宏定义

4. **编译和输出**
   - 点击编译按钮或按 F5
   - 检查编译输出
   - 保存编译结果

## 快捷键列表

### 文件操作
- `Ctrl+O`：打开文件
- `Ctrl+S`：保存结果
- `Ctrl+W`：关闭当前文件
- `Alt+F4`：退出程序

### 编译操作
- `F5`：编译
- `Ctrl+Shift+D`：显示反汇编
- `F6`：清除输出

### 界面控制
- `F12`：切换输出面板
- `Ctrl+T`：切换主题
- `Ctrl+R`：重置布局
- `Ctrl+M`：最大化/还原编辑器

### 编辑操作
- `Ctrl+Z`：撤销
- `Ctrl+Y`：重做
- `Ctrl+F`：查找（计划中）
- `Ctrl+H`：替换（计划中）

## 配置文件

程序在 `config/settings.ini` 中保存配置，包括：

### 界面设置
- 窗口位置和大小
- 主题选择
- 面板布局
- 工具栏配置

### 编译设置
- 最后使用的编译器
- 着色器类型
- 入口点
- Shader Model
- 输出格式

### 工作环境
- 包含路径列表
- 宏定义列表
- 最近打开的文件
- 编码设置
