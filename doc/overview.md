# ShaderCross 技术概述

## 项目概述

ShaderCross 是一个专业的着色器编译和转换工具，旨在简化跨平台图形开发中的着色器处理流程。它提供了直观的图形界面，支持多种着色器语言和中间格式之间的转换。

### 核心优势
- **统一工作流程**：整合多个着色器编译工具，提供统一的操作界面
- **智能编译选项**：根据输入/输出格式自动调整可用的编译器和选项
- **完整的格式支持**：覆盖主流图形API所需的着色器格式
- **开发者友好**：保存工作环境，支持多种编码，提供详细的编译信息

## 系统架构

ShaderCross 采用模块化设计，主要由以下几个核心模块组成：

### 界面模块
- **基于 Qt 5.12.5 框架**
  - 采用双面板设计
  - 支持深色/浅色主题切换
  - 完整的快捷键支持
  - 可配置的界面布局

### 编译器集成模块
- **DXC (DirectX Shader Compiler)**
  - 用于编译现代 HLSL
  - 支持 DXIL 和 SPIR-V 输出
  - 适用于 DirectX 12
- **FXC (Effect Compiler)**
  - 用于编译传统 HLSL
  - 输出 DXBC 格式
  - 适用于 DirectX 11
- **GLSLANG**
  - 用于编译 GLSL
  - 输出 SPIR-V 格式
  - 适用于 Vulkan/OpenGL
- **SPIRV-CROSS**
  - 用于着色器代码转换
  - 支持 HLSL/GLSL 输出
  - 跨平台格式转换

### 输入处理模块
- **多种文本编码支持**
  - UTF-8（默认）
  - GB18030（中文支持）
  - UTF-16
  - System
- **资源管理**
  - 文件路径管理
  - 包含路径管理
  - 宏定义处理
  - 自动保存机制

### 配置管理模块
- **基于 QSettings**
  - 自动保存/加载配置
  - 界面设置
  - 编译选项
  - 工作环境

## 技术栈

### 开发环境
- **编程语言**：C++17
- **构建系统**：CMake 3.15+
- **开发工具**：Visual Studio 2022
- **UI 框架**：Qt 5.12.5

### 依赖组件
- **Qt 组件**
  - Qt Widgets：界面组件
  - Qt Core：核心功能
- **编译工具**
  - DirectX Shader Compiler
  - GLSLANG
  - SPIRV-Cross

## 项目结构

```
ShaderCross/
├── src/                    # 源代码目录
│   ├── main.cpp           # 程序入口
│   ├── mainwindow.h       # 主窗口头文件
│   ├── mainwindow.cpp     # 主窗口实现
│   └── resources/         # 资源文件
│       └── icons/         # 图标资源
├── doc/                    # 文档目录
│   ├── overview.md        # 技术概述
│   ├── user_guide.md      # 用户指南
│   └── api_reference.md   # API 参考
├── resources/             # 项目资源
│   └── icons/            # 图标文件
├── CMakeLists.txt         # CMake 配置文件
└── README.md              # 项目说明
```

## 编译流程

### Windows 平台
1. **环境准备**
   - 安装 Visual Studio 2022
   - 安装 Qt 5.12.5
   - 安装 CMake 3.15+

2. **构建步骤**
```bash
mkdir build
cd build
cmake ..
cmake --build . --config Release
```

## 扩展性设计

### 编译器集成
- **统一接口**：标准化的编译器接口
- **可插拔实现**：支持添加新的编译器
- **灵活配置**：自定义编译选项

### 界面定制
- **布局系统**：可配置的界面布局
- **主题系统**：可扩展的主题支持
- **快捷键**：自定义快捷键支持

### 输出处理
- **格式定义**：灵活的输出格式系统
- **扩展支持**：支持新格式添加
- **自定义处理**：可定制输出处理流程

## 性能优化

### 界面响应
- **异步编译**：后台编译处理
- **延迟加载**：按需加载资源
- **状态缓存**：优化界面更新

### 资源管理
- **智能加载**：配置按需加载
- **文件缓存**：优化文件访问
- **内存优化**：减少资源占用

## 开发计划

### 近期目标
- **编辑器增强**
  - 语法高亮
  - 自动补全
  - 实时错误提示
- **性能优化**
  - 编译速度提升
  - 内存使用优化
- **功能扩展**
  - 批处理支持
  - 命令行接口

### 长期规划
- **跨平台支持**
  - Linux 支持
  - macOS 支持
- **功能增强**
  - 插件系统
  - 性能分析
  - 自动化测试 